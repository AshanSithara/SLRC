<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/header :: headerFragment}">
    <meta charset="UTF-8">
    <title> Page Home </title>
</head>

<link href="http://fullcalendar.io/js/fullcalendar-2.2.5/fullcalendar.css"
      rel="stylesheet" th:href="@{/webjars/fullcalendar/2.2.5/fullcalendar.css}"></link>
<link href="http://fullcalendar.io/js/fullcalendar-2.2.5/fullcalendar.print.css"
      media="print" rel="stylesheet" th:href="@{/webjars/fullcalendar/2.2.5/fullcalendar.print.css}"></link>
<link crossorigin="anonymous" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
      integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" rel="stylesheet">
<!--=========================*
          All CSS
*===========================-->

<link rel="stylesheet" th:href="@{/css/all.css}">
<script th:src="@{/js/all.js}" type="text/javascript"></script>
<!--=========================*
           Toastr Css
*===========================-->
<link rel="stylesheet" th:href="@{/css/toastr.min.css}">

<!--=========================*
          Datatable
*===========================-->
<!-- Start datatable css -->
<link rel="stylesheet" th:href="@{/css/jquery.dataTables.css}" type="text/css">
<link rel="stylesheet" th:href="@{/css/dataTables.bootstrap4.min.css}"
      type="text/css">
<link rel="stylesheet" th:href="@{/css/responsive.bootstrap.min.css}"
      type="text/css">
<link rel="stylesheet" th:href="@{/css/responsive.jqueryui.min.css}" type="text/css">
<link rel="stylesheet" th:href="@{/css/jquery.steps.css}" type="text/css">

<style>

    body {
        margin: 0;
        padding: 0;
        font-family: "Lucida Grande", Helvetica, Arial, Verdana, sans-serif;
        font-size: 14px;
    }

    #calendar {
        max-width: 900px;
        margin: 0 auto;
    }

</style>

<body>

<main>
    <!-- left side menu -->
    <div th:replace="~{fragments/side_panel :: side_panel_fragment}"></div>

    <!-- rite side content wrapping area -->
    <div class="content_wrapper">

        <div class="content_section">
            <div class="container">
                <div class="theme-bg-transparent p-5 border-rounded-4">

                    <h1 class="mb-3">
                        <i class="fa fa-building"></i> Studio List
                        <a class="btn btn-success"
                           href="/studio/add"
                           tabindex="1" th:if="${role == 'Admin' || role == 'Producer' || role == 'Booking Officer' }">
                            <i class="fa fa-plus"></i>&nbsp;&nbsp;New Studio
                        </a>
                    </h1>

                    <hr>


                    <div class="row">
                        <div class="col-lg-12">
                            <div class="card">
                                <div class="card-body">
                                    <h4 class="card_title">Employee Report Details</h4>
                                    <div class="card-header">
                                        <div class="form-row">
                                            <div class="col-md-3 mb-3">
                                                <select class="form-control" id="combosearch" name="combosearch">
                                                    <option value="none">Select Team</option>
                                                </select>
                                                <div class="d-none" id="combosearcherror" style="color:red;">
                                                    Please Select Team
                                                </div>
                                            </div><!-- form-group -->
                                            <button class="btn btn-primary mb-2 " id="search_button"
                                                    onclick="searchdatanew()"
                                                    type="button"><i
                                                    class="fa fa-search"></i> Search
                                            </button>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="table-responsive datatable-primary">
                                            <table class="text-center" id="dataTable2">
                                                <thead class="text-capitalize">
                                                <tr>
                                                    <th>Title</th>
                                                    <th>Employee Name</th>
                                                    <th>Designation</th>
                                                    <th>Nation ID Number</th>
                                                    <th>Employee Email</th>

                                                </tr>
                                                </thead>
                                                <tbody>

                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div aria-hidden="true" aria-labelledby="exampleModalLabel" class="modal fade" id="calendarModal"
                         role="dialog"
                         tabindex="-1">
                        <div class="modal-dialog modal-dialog-centered" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="exampleModalLongTitle"></h5>
                                    <button aria-label="Close" class="close" data-dismiss="modal" type="button">
                                        <span aria-hidden="true">&times;</span>
                                    </button>
                                </div>
                                <div class="modal-body pd-20">
                                    <div class="row">
                                        <div class="form-group wd-xs-300 col-md-6 col-sm-12 col-lg-6">
                                            <input class="d-none" id="eventid">
                                            <label class="form-control-label">Event Name : <span
                                                    class="tx-danger">*</span></label>
                                            <input class="form-control" id="eventnamemodal" name="eventnamemodal"
                                                   placeholder="Event Name"
                                                   required
                                                   type="text">
                                            <div class="abc d-none" id="eventnamemodalerror">
                                                <p style="color:red;">Please Enter Valid Event Name </p>
                                            </div>
                                        </div><!-- form-group -->


                                        <div class="form-group wd-xs-300 col-md-6 col-sm-12 col-lg-6">
                                            <label class="form-control-label">Description : <span
                                                    class="tx-danger">*</span></label>
                                            <textarea class="form-control" id="descriptionmodal" name="descriptionmodal"
                                                      placeholder="Description" required></textarea>
                                            <div class="abc d-none" id="descriptionmodalerror">
                                                <p style="color:red;">Please Enter Valid Description </p>
                                            </div>
                                        </div><!-- form-group -->

                                        <div class="form-group wd-xs-300 col-md-6 col-sm-12 col-lg-6">
                                            <label class="form-control-label">Event Begin Time : <span
                                                    class="tx-danger">*</span></label>
                                            <input class="form-control" id="EventBeginTimemodal"
                                                   name="EventBeginTimemodal"
                                                   placeholder="Event Begin Time"
                                                   required type="datetime-local">
                                            <div class="abc d-none" id="EventBeginTimemodalerror">
                                                <p style="color:red;">Please Enter Valid Event Begin Time </p>
                                            </div>
                                        </div><!-- form-group -->
                                        <div class="form-group wd-xs-300 col-md-6 col-sm-12 col-lg-6">
                                            <label class="form-control-label">Event End Time : <span
                                                    class="tx-danger">*</span></label>
                                            <input class="form-control" id="EventEndTimemodal" name="EventEndTimemodal"
                                                   placeholder="Event End Time"
                                                   required
                                                   type="datetime-local">
                                            <div class="abc d-none" id="EventEndTimemodalerror">
                                                <p style="color:red;">Please Enter Valid Event End Time </p>
                                            </div>
                                        </div><!-- form-group -->
                                        <div class="form-group wd-xs-300 col-md-6 col-sm-12 col-lg-6">
                                            <div class="form-check">
                                                <input checked class="form-check-input" id="SingleDaymodal"
                                                       name="exampleRadiosmodal"
                                                       type="radio" value="SingleDay">
                                                <label class="form-check-label" for="SingleDaymodal">
                                                    Single Day
                                                </label>
                                            </div>
                                        </div>
                                        <div class="form-group wd-xs-300 col-md-6 col-sm-12 col-lg-6">
                                            <div class="form-check">
                                                <input class="form-check-input" id="BulkDaysmodal"
                                                       name="exampleRadiosmodal" type="radio"
                                                       value="BulkDays">
                                                <label class="form-check-label" for="BulkDaysmodal">
                                                    Bulk Days
                                                </label>
                                            </div>
                                        </div>

                                    </div>

                                </div><!-- modal-body -->
                                <div class="modal-footer">
                                    <button class="btn btn-secondary" data-dismiss="modal" type="button">Close</button>
                                    <button class="btn btn-primary" onclick="updateevent()" type="button">Save changes
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>

        <!-- footer section -->
        <footer th:replace="~{fragments/footer :: footerFragment}"></footer>
    </div>
    <!-- rite side content wrapping area -->
</main>

<!--script include-->
<script th:replace="~{fragments/script :: scriptFragment}"></script>

<script src="http://cdnjs.cloudflare.com/ajax/libs/moment.js/2.9.0/moment.min.js"
        th:src="@{/webjars/momentjs/2.9.0/min/moment.min.js}" type="text/javascript"></script>
<script src="http://cdn.jsdelivr.net/webjars/jquery/3.4.1/jquery.min.js"
        th:src="@{/webjars/jquery/3.4.1/jquery.min.js}" type="text/javascript"></script>
<script src="http://fullcalendar.io/js/fullcalendar-2.2.5/fullcalendar.min.js"
        th:src="@{/webjars/fullcalendar/2.2.5/fullcalendar.min.js}" type="text/javascript"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
        integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
        integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>

<!--base Component -->
<script type="text/javascript" th:src="@{/js/baseComponet.js}"></script>

<!-- Toastr Js -->
<script type="text/javascript" th:src="@{/js/toastr.min.js}"></script>
<!-- Toastr Init -->
<script type="text/javascript" th:src="@{/js/toastr.js}"></script>


<!-- Data Table js -->
<script th:src="@{/js/jquery.steps.js}"></script>
<script th:src="@{/js/jquery.dataTables.js}"></script>
<script th:src="@{/js/jquery.dataTables.min.js}"></script>
<script th:src="@{/js/dataTables.bootstrap4.min.js}"></script>
<script th:src="@{/js/dataTables.responsive.min.js}"></script>
<script th:src="@{/js/responsive.bootstrap.min.js}"></script>

<!-- Data table Init -->
<script th:src="@{/js/data-table.js}"></script>

<script>

    let Table1 = $('#dataTable2').DataTable({
        data: [],
        "columns": [
            {"data": "title"},
            {"data": "name"},
            {"data": "designation"},
            {"data": "nic"},
            {"data": "email"}

        ],
        rowCallback: function (row, data) {
        },
        filter: true,
        info: true,
        ordering: true,
        processing: true,
        retrieve: true
    });

    function validateTeam() {
        let result = false;
        if ($('#combosearch').val() == "none") {

            $('#combosearcherror').removeClass('d-none');
            $('#combosearch').css('border-color', 'red');
            result = false;
        } else {
            $('#combosearch').css('border-color', '');
            $('#combosearcherror').addClass('d-none');
            result = true;

        }
        return result;
    }

    function searchdatanew() {
        if (validateTeam()) {
            $.ajax({
                url: '/report/search/employee/getdata',
                type: "post",
                data: {
                    searchcombo: $('#combosearch').val()
                }
            }).done(function (result) {
                Table1.clear().draw();
                Table1.rows.add(result).draw();
            }).fail(function (jqXHR, textStatus, errorThrown) {
                // needs to implement if it fails
            });
        } else {
            showToast(TOAST_TYPE.DANGER, 'Error !', 'Something went wrong !');
        }
    }

    function getallTeams() {
        $.ajax({
            url: baseURL + "team/all",
            method: 'GET',
            async: true,
            dataType: "json"
        }).done(function (resp) {
            $('#combosearch').empty();

            let row = "<option value=\"none\" >Select Team</option>";
            $('#combosearch').append(row);
            let row1 = "";
            for (let i in resp) {

                let response = resp[i];
                let id = response['id'];
                let teamName = response['teamName'];
                row1 = "<option value=" + id + " >" + teamName + "</option>";
                $('#combosearch').append(row1);
            }
        });
    }

    getallTeams();


</script>

</body>
</html>
